{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "width": 980,
  "height": 540,
  "title": {"text": "Malaysia Crude Oil Exports by Country (2023) — Bubble Chart"},
  "data": {
    "url": "https://raw.githubusercontent.com/ESPLORARE/FIT3179A2/refs/heads/main/exportCountry.csv"
  },
  "transform": [
    {
      "calculate": "toNumber(datum['Exports Value in 2023 ($)'])",
      "as": "Value_USD"
    },
    { "calculate": "datum.Value_USD / 1e6", "as": "Value_MillionUSD" }
  ],
  "mark": {
    "type": "circle",
    "opacity": 0.9,
    "stroke": "white",
    "strokeWidth": 0.7
  },
  "encoding": {
    "y": {
      "field": "Country",
      "type": "nominal",
      "sort": "-x",
      "title": null
    },
    "x": {
      "field": "Value_MillionUSD",
      "type": "quantitative",
      "axis": {"title": "Exports (Million USD)", "format": ","}
    },
    "size": {
      "field": "Value_MillionUSD",
      "type": "quantitative",
      "title": "Bubble area ∝ value",
      "scale": { "type": "linear", "range": [100, 5200], "clamp": true }
    },
    "tooltip": [
      {"field": "Country", "type": "nominal"},
      {
        "field": "Value_USD",
        "type": "quantitative",
        "title": "Exports (USD)",
        "format": ","
      },
      {
        "field": "Value_MillionUSD",
        "type": "quantitative",
        "title": "Exports (Million USD)",
        "format": ",.1f"
      }
    ]
  },
  "config": { "view": { "stroke": null } }
}
